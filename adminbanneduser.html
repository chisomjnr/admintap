<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <title>Tapblox | Admin Dashboard</title>

    <!-- Montserrat Font -->
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@100;200;300;400;500;600;700;800;900&display=swap" rel="stylesheet">

    <!-- Material Icons -->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Outlined" rel="stylesheet">

    <link
    href="https://fonts.googleapis.com/css2?family=Nunito+Sans:wght@400;600;700&family=Poppins:wght@400;500;600;700&display=swap"
    rel="stylesheet">

    <link
    href="https://cdn.jsdelivr.net/npm/remixicon@4.1.0/fonts/remixicon.css"
    rel="stylesheet"
  />
    <link
    href="https://cdn.jsdelivr.net/npm/remixicon@2.5.0/fonts/remixicon.css"
    rel="stylesheet"
  />

  <link href='https://unpkg.com/boxicons@2.0.7/css/boxicons.min.css' rel='stylesheet'>

    <!-- Custom CSS -->
    <link rel="stylesheet" href="css/styles.css">
  </head>
  <body>
    <div class="grid-container">

      <!-- Header -->
      <header class="header">
        <div class="menu-icon" onclick="openSidebar()">
          <span class="material-icons-outlined">menu</span>
        </div>
        <div class="header-left">
          <span class="material-icons-outlined">search</span>
        </div>
        <div class="header-right">
            <span ><a  href="adminuser.html">All Users</a></span>
          <span ><a href="adminactiveuser.html">Active Users</a></span>
          <span ><a id="ac"  href="adminbanneduser.html">Banned Users</a></span>
          <span ><a href="adminpendinguser.html">Pending Users</a></span>
        </div>
      </header>
      <!-- End Header -->

      

      <!-- Sidebar -->
      <aside id="sidebar">
        <div class="sidebar-title">
          <div class="sidebar-brand">
            <span class="material-icons-outlined"></span> <strong style="color: white;">Tapblox Admin<strong style="color: orange;">.</strong> </strong>
          </div>
          <span class="material-icons-outlined" onclick="closeSidebar()">close</span>
        </div>

        <ul class="sidebar-list">
          <li   class="sidebar-list-item">
            <a href="admindashboard.html">
              <span class="material-icons-outlined">dashboard</span> Dashboard
            </a>
          </li>
          <li id="active" class="sidebar-list-item">
            <a href="adminuser.html">
              <span class="material-icons-outlined">person</span> User Management
            </a>
          </li>
          <li class="sidebar-list-item">
            <a href="admintask.html">
              <span class="material-icons-outlined">fact_check</span> Task Management
            </a>
          </li>
        
          <li class="sidebar-list-item">
            <a href="adminnotification.html">
              <span class="material-icons-outlined">alarm</span> Notifications
            </a>
          </li>

          <li class="sidebar-list-item">
            <a href="admindeposits.html">
              <span class="material-icons-outlined">account_balance</span> Deposits
            </a>
          </li>
          <li class="sidebar-list-item">
            <a href="adminwithdrawals.html">
              <span class="material-icons-outlined">account_balance_wallet</span> Withdrawals
            </a>
          </li>
          <li class="sidebar-list-item">
            <a href="adminreport.html">
              <span class="material-icons-outlined">bar_chart</span> Report
            </a>
          </li>
          <li class="sidebar-list-item">
            <a href="adminextra.html">
              <span class="material-icons-outlined">more_horiz</span> Extra
            </a>
          </li>
          <li class="sidebar-list-item">
            <a href="adinsupport.html">
              <span class="material-icons-outlined">support_agent</span> Support Tickets
            </a>
          </li>
          <li class="sidebar-list-item">
            <a href="adminptc.html">
              <span class="material-icons-outlined">assessment</span> PTC Reports
            </a>
          </li>
          
          <li class="sidebar-list-item">
            <a href="adminreferral.html">
              <span class="material-icons-outlined">group_add</span> Referral Commission
            </a>
          </li>          

          <li class="sidebar-list-item">
            <a href="adminanalysis.html">
              <span class="material-icons-outlined">poll</span> Analysis
            </a>
          </li>
          <li class="sidebar-list-item">
            <a href="adminsettings.html">
              <span class="material-icons-outlined">settings</span> System Settings
            </a>
          </li>

          <li class="sidebar-list-item">
            <a href="#"  id="logout-btn">
              <span class="material-icons-outlined">logout</span> Logout
            </a>
          </li>
        </ul>
      </aside>
      <!-- End Sidebar -->

      <script>
        // Add event listener to the logout button
        document.getElementById('logout-btn').addEventListener('click', function(event) {
            event.preventDefault(); // Prevent default link behavior
    
            // Clear login status from sessionStorage
            sessionStorage.removeItem('isLoggedIn');
    
            // Optionally, clear localStorage if used for persistent login
            // localStorage.removeItem('isLoggedIn');
    
            // Redirect to adminlogin.html
            window.location.href = 'adminlogin.html';
        });
    </script>





<script>
  // Check if the user is logged in
  window.onload = function() {
      const isLoggedIn = sessionStorage.getItem('isLoggedIn');
      
      if (isLoggedIn !== 'true') {
          // Redirect to adminlogin.html if not logged in
          window.location.href = 'adminlogin.html';
      }
  };
</script>






<script src="admin.js"></script>


      <!-- Main -->
      <main class="main-container">
 







        <style>
            .popup-overlay {
                position: fixed;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background: rgba(0, 0, 0, 0.7);
                display: none;
                justify-content: center;
                align-items: center;
                z-index: 999999;
                overflow-y: scroll;
                scrollbar-width: none; /* For Firefox */
            }
        
            .popup-form {
               
                padding: 40px;
                border-radius: 10px;
                max-width: 800px;
                width: 100%;
                transform: translateY(100%);
                animation: slide-in 0.5s forwards;
            }
        
            @keyframes slide-in {
                from {
                    transform: translateY(100%);
                }
                to {
                    transform: translateY(0);
                }
            }
        
            /* Show the popup */
            .show-popup {
                display: flex;
            }
        
            /* Horizontal scrollable table */
            .table-wrapper {
                overflow-x: auto;
                padding: 10px;
                margin-top: 10px;
            }
        
            .accounts-table {
                width: 100%;
                min-width: 1500px; /* Set minimum width to allow horizontal scrolling */
                border-collapse: collapse;
            }
        
            .accounts-table th, .accounts-table td {
                padding: 10px;
                text-align: left;
                border-bottom: 1px solid #ddd;
            }
        
            /* Scrollbar styling */
            .table-wrapper::-webkit-scrollbar {
                height: 3px;
            }
        
            .table-wrapper::-webkit-scrollbar-thumb {
                background-color: orange;
                border-radius: 10px;
            }
        
            .table-wrapper::-webkit-scrollbar-thumb:hover {
                background-color: #343434;
            }
        
            .table-wrapper::-webkit-scrollbar {
                background-color: #f1f1f1;
            }
        
        </style>
        
      
        
      











        <!-- Main Content Area -->
        <main>
            <div class="content-header">
                <h2>Banned Users</h2>
                <button class="add-btn" id="openPopupBtn"><i class="bx bx-upload"></i> Add New</button>
            </div>
        
            <!-- Customer Accounts Table -->
            <div class="table-wrapper">
                <table class="accounts-table" id="accountsTable">
                    <thead>
                        <tr>
                            <th><input type="checkbox"></th>
                            <th>Customer ID</th>
                            <th>Name</th>
                            <th>Email</th>
                            <th>Password</th>
                            <th>Time Joined</th>
                            <th>Date Joined</th>
                            <th>Account Status</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><input type="checkbox"></td>
                            <td>CUST001</td>
                            <td>John Doe</td>
                            <td>john.doe@example.com</td>
                            <td>*******</td>
                            <td>10:30 AM</td>
                            <td>2024-10-05</td>
                            <td class="status active">Active</td>
                            <td>
                                <button class="view-btn">View</button>
                                <button class="edit-btn">Edit</button>
                                <button class="delete-btn">Delete</button>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </main>
        
        <!-- Popup Form for Add New -->
        <div class="popup-overlay" id="popupOverlay">
            <div class="popup-form">
                <section class="body">
                    <section class="container">
                        <header>
                            <h1 style="font-size: 25px;">Tapblox Admin<strong style="color: orange;">.</strong></h1>
                        </header>
                      <header id="popupHeader">Create User</header> <!-- Header changes dynamically -->
             <form action="#" class="form" id="customerForm">
                            <div class="input-box address">
                                <label style="color: orange;">Details</label>
                                <div class="column">
                                    <input type="text" id="firstName" placeholder="First Name" required />
                                    <input type="text" id="lastName" placeholder="Last Name" required />
                                </div>
                                <div class="column">
                                    <input type="email" id="email" placeholder="Email" required />
                                </div>
                                <div class="column">
                                    <input type="text" id="customerID" placeholder="Customer ID" readonly />
                                </div>
      
                                <div class="column">
                                  <input type="password" id="password" placeholder="Password" required />
                              </div>
                            </div>
                        
                            <button type="submit" id="commitChangesBtn">Commit Changes</button>
                        </form>
                    </section>
                </section>
            </div>
        </div>
      
          <script>
          const openPopupBtn = document.getElementById('openPopupBtn');
          const popupOverlay = document.getElementById('popupOverlay');
          const customerForm = document.getElementById('customerForm');
          const accountsTable = document.getElementById('accountsTable').getElementsByTagName('tbody')[0];
          let customerCount = 1;
          let editingCustomerIndex = null;
      
          // Load saved customers from localStorage on page load
          document.addEventListener('DOMContentLoaded', loadCustomers);
      
          // Open the popup for "Create Customer"
          openPopupBtn.addEventListener('click', () => {
              openPopup('create');
              generateCustomerID(); // Generate Customer ID when popup opens
          });
      
          // Close popup when clicking outside
          popupOverlay.addEventListener('click', (event) => {
              if (event.target === popupOverlay) {
                  popupOverlay.classList.remove('show-popup');
              }
          });
      
      // Open Popup for Create, View, or Edit mode
      function openPopup(mode, customer = null) {
          if (mode === 'create') {
              popupHeader.textContent = 'Create User'; // Set popup header
              generateCustomerID(); // Generate a new Customer ID
              customerForm.reset(); // Reset form fields for a new customer
              editingCustomerIndex = null;
              toggleFormEditable(true); // Make form editable for create
          } else if (mode === 'edit' || mode === 'view') {
              popupHeader.textContent = mode === 'edit' ? 'Edit User' : 'View User'; // Change header based on mode
              fillFormWithCustomerData(customer); // Populate form with customer data
              editingCustomerIndex = customer.index;
              toggleFormEditable(mode === 'edit'); // Make form editable only in edit mode
          }
          popupOverlay.classList.add('show-popup'); // Show the popup
      }
      
      // Fill the form with customer data (used for View and Edit)
      function fillFormWithCustomerData(customer) {
          document.getElementById('customerID').value = customer.customerID;
          const [firstName, lastName] = customer.name.split(' ');
          document.getElementById('firstName').value = firstName;
          document.getElementById('lastName').value = lastName;
          document.getElementById('email').value = customer.email;
          document.getElementById('password').value = customer.password;
      }
      
      
          // Generate Customer ID automatically
          function generateCustomerID() {
              customerCount++; // Increment customer count for each new customer
              const customerIDInput = document.getElementById('customerID');
              customerIDInput.value = 'CUST' + ('000' + customerCount).slice(-3);
          }
      
          // Get current time in HH:MM AM/PM format
          function getCurrentTime() {
              const now = new Date();
              let hours = now.getHours();
              let minutes = now.getMinutes();
              const ampm = hours >= 12 ? 'PM' : 'AM';
              hours = hours % 12;
              hours = hours ? hours : 12; // hour '0' should be '12'
              minutes = minutes < 10 ? '0' + minutes : minutes;
              return hours + ':' + minutes + ' ' + ampm;
          }
      
          // Get current date in YYYY-MM-DD format
          function getCurrentDate() {
              const now = new Date();
              return now.toISOString().split('T')[0];
          }
      
          // Handle form submission to add a new or edit existing customer
          customerForm.addEventListener('submit', (event) => {
              event.preventDefault(); // Prevent form from refreshing the page
      
              // Get form values
              const firstName = document.getElementById('firstName').value;
              const lastName = document.getElementById('lastName').value;
              const email = document.getElementById('email').value;
              const password = document.getElementById('password').value;
              const customerID = document.getElementById('customerID').value;
              const timeJoined = getCurrentTime();
              const dateJoined = getCurrentDate();
      
              // Create or Update customer object
              const newCustomer = {
                  customerID,
                  name: `${firstName} ${lastName}`,
                  email,
                  password,
                  timeJoined,
                  dateJoined,
                  status: 'Active'
              };
      
              if (editingCustomerIndex === null) {
                  // New customer (Create mode)
                  addCustomerToTable(newCustomer);
                  saveCustomer(newCustomer);
              } else {
                  // Edit existing customer
                  updateCustomer(newCustomer, editingCustomerIndex);
              }
      
              // Close the popup after adding/editing
              popupOverlay.classList.remove('show-popup');
              customerForm.reset();
              generateCustomerID();
          });
      
          // Fill the form with customer data (used for View and Edit)
          function fillFormWithCustomerData(customer) {
              document.getElementById('customerID').value = customer.customerID;
              const [firstName, lastName] = customer.name.split(' ');
              document.getElementById('firstName').value = firstName;
              document.getElementById('lastName').value = lastName;
              document.getElementById('email').value = customer.email;
              document.getElementById('password').value = customer.password;
          }
      
          // Toggle form editable (used for View/Edit modes)
          function toggleFormEditable(isEditable) {
              const formInputs = customerForm.querySelectorAll('input');
              formInputs.forEach(input => input.readOnly = !isEditable);
              const commitButton = customerForm.querySelector('button[type="submit"]');
              commitButton.style.display = isEditable ? 'block' : 'none'; // Hide button if not editable
          }
      
          // Add customer to the table
          function addCustomerToTable(customer) {
              const newRow = accountsTable.insertRow();
              newRow.innerHTML = `
                  <td><input type="checkbox"></td>
                  <td>${customer.customerID}</td>
                  <td>${customer.name}</td>
                  <td>${customer.email}</td>
                  <td>${'*'.repeat(customer.password.length)}</td> <!-- Password masked with * -->
                  <td>${customer.timeJoined}</td>
                  <td>${customer.dateJoined}</td>
                  <td class="status active">${customer.status}</td>
                  <td>
                      <button class="view-btn" onclick="viewCustomer(${accountsTable.rows.length - 1})">View</button>
                      <button class="edit-btn" onclick="editCustomer(${accountsTable.rows.length - 1})">Edit</button>
                      <button class="delete-btn" onclick="deleteCustomer(${accountsTable.rows.length - 1})">Delete</button>
                  </td>
              `;
          }
      
          // Save a customer to localStorage
          function saveCustomer(customer) {
              let customers = JSON.parse(localStorage.getItem('customers')) || [];
              customers.push(customer);
              localStorage.setItem('customers', JSON.stringify(customers));
          }
      
          // Load customers from localStorage and populate the table
          function loadCustomers() {
              let customers = JSON.parse(localStorage.getItem('customers')) || [];
              customers.forEach((customer, index) => {
                  customer.index = index;
                  addCustomerToTable(customer);
              });
              customerCount = customers.length; // Update customer count to match saved customers
          }
      
           // View customer details (open popup in View mode)
           function viewCustomer(rowIndex) {
              let customers = JSON.parse(localStorage.getItem('customers')) || [];
              const customer = customers[rowIndex];
              openPopup('view', customer);
          }
      
          // Edit customer details (open popup in Edit mode)
          function editCustomer(rowIndex) {
              let customers = JSON.parse(localStorage.getItem('customers')) || [];
              const customer = customers[rowIndex];
              openPopup('edit', customer);
          }
      
          // Update an existing customer
          function updateCustomer(updatedCustomer, index) {
              let customers = JSON.parse(localStorage.getItem('customers')) || [];
              customers[index] = updatedCustomer; // Update customer in array
              localStorage.setItem('customers', JSON.stringify(customers));
              // Reload the table
              accountsTable.innerHTML = ''; // Clear table
              loadCustomers(); // Reload table with updated customers
          }
      
          // Delete customer from table and localStorage
          function deleteCustomer(rowIndex) {
              let customers = JSON.parse(localStorage.getItem('customers')) || [];
              customers.splice(rowIndex, 1); // Remove customer from array
              localStorage.setItem('customers', JSON.stringify(customers));
              // Reload the table
              accountsTable.innerHTML = ''; // Clear table
              loadCustomers(); // Reload table with remaining customers
          }
      </script>
      
      
        
      
      
           <!-- Report <a style="z-index: 999999999;" href="support.html" class="user-account"><i class="ri-customer-service-2-line"></i>
              Support</a>
      
       -->
      
            <div>
      
            </div>
        </section>
      
      
      
      
      
      
      
      
      
      
      
      
      




































<br>


      </main>
      <!-- End Main -->

    </div>

    <!-- Scripts -->
    <!-- ApexCharts -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/apexcharts/3.35.3/apexcharts.min.js"></script>
    <!-- Custom JS -->
    <script src="js/scripts.js"></script>
  </body>
</html>