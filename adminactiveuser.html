<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <title>Tapblox | Admin Dashboard</title>

    <!-- Montserrat Font -->
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@100;200;300;400;500;600;700;800;900&display=swap" rel="stylesheet">

    <!-- Material Icons -->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Outlined" rel="stylesheet">

    <link
    href="https://fonts.googleapis.com/css2?family=Nunito+Sans:wght@400;600;700&family=Poppins:wght@400;500;600;700&display=swap"
    rel="stylesheet">

    <link
    href="https://cdn.jsdelivr.net/npm/remixicon@4.1.0/fonts/remixicon.css"
    rel="stylesheet"
  />
    <link
    href="https://cdn.jsdelivr.net/npm/remixicon@2.5.0/fonts/remixicon.css"
    rel="stylesheet"
  />

  <link href='https://unpkg.com/boxicons@2.0.7/css/boxicons.min.css' rel='stylesheet'>

    <!-- Custom CSS -->
    <link rel="stylesheet" href="css/styles.css">
  </head>
  <body>
    <style>
        /* Loader styling */
        .loader {
               display: none; /* Hidden by default */
               position: fixed;
               top: 0;
               left: 0;
               width: 100%;
               height: 100%;
               background-color: rgba(39, 39, 39, 0.8);
               justify-content: center;
               align-items: center;
               z-index: 100000000000000;
               flex-direction: column; /* Arrange items in a column */
           }
   
           /* Spinner animation */
           .spinner {
               width: 60px;
               height: 60px;
               border: 2px solid #f3f4f6;
               border-top: 2px solid orange;
               border-radius: 50%;
               animation: spin 1s linear infinite;
               margin-bottom: 15px; /* Adds space below spinner */
           }
   
           /* Keyframes for spinner rotation */
           @keyframes spin {
               0% { transform: rotate(0deg); }
               100% { transform: rotate(360deg); }
           }
   
           /* Styling for loader text */
           .loader p {
               color: #ffffff;
               font-size: 16px;
               text-align: center;
           }
   </style>
   
   <!-- Loader Overlay -->
   <div class="loader" id="loader">
       <div class="spinner"></div>
       <p>Updating Settings...</p>
   </div>
   


   <script>
    // Variables to track touch positions and one-time loader trigger
    let startY = 0;
    let endY = 0;
    let loaderShownOnce = false;

    // Function to show the loader
    function showLoaderAndRefresh() {
        document.getElementById("loader").style.display = "flex";
        setTimeout(() => {
            location.reload();
        }, 1000); // Wait for 1 second before reloading the page
    }

    // Automatically show loader 2 seconds after page load (only once)
    window.addEventListener("load", function() {
        setTimeout(() => {
            if (!loaderShownOnce) { // Check if loader hasn't been shown before
                document.getElementById("loader").style.display = "flex";
                loaderShownOnce = true; // Set the flag to true
                setTimeout(() => {
                    document.getElementById("loader").style.display = "none"; // Hide loader after 2 seconds
                }, 2000); // Hide the loader after 2 seconds
            }
        }, 0); // Show the loader 2 seconds after page opens
    });

    // Detect the touch start (finger down)
    document.body.addEventListener("touchstart", function(e) {
        startY = e.touches[0].clientY;
    });

    // Detect the touch end (finger up)
    document.body.addEventListener("touchend", function(e) {
        endY = e.changedTouches[0].clientY;

        // Check if the swipe was a downward swipe
        if (endY - startY > 100) {
            // Show the loader and refresh the page
            if (!loaderShownOnce) {
                showLoaderAndRefresh();
                loaderShownOnce = true; // Set the flag to true to prevent re-triggering
            }
        }
    });
</script>

    <div class="grid-container">

      <!-- Header -->
      <header class="header">
        <div class="menu-icon" onclick="openSidebar()">
          <span class="material-icons-outlined">menu</span>
        </div>
        <div class="header-left">
          <span class="material-icons-outlined">search</span>
        </div>
        <div class="header-right">
            <span ><a  href="adminuser.html">All Users</a></span>
          <span ><a id="ac" href="adminactiveuser.html">Active Users</a></span>
          <span ><a href="adminbanneduser.html">Banned Users</a></span>
          <span ><a href="adminpendinguser.html">Pending Users</a></span>
        </div>
      </header>
      <!-- End Header -->

      

      <!-- Sidebar -->
      <aside id="sidebar">
        <div class="sidebar-title">
          <div class="sidebar-brand">
            <span class="material-icons-outlined"></span> <strong style="color: white;">Tapblox Admin<strong style="color: orange;">.</strong> </strong>
          </div>
          <span class="material-icons-outlined" onclick="closeSidebar()">close</span>
        </div>

        <ul class="sidebar-list">
          <li   class="sidebar-list-item">
            <a href="admindashboard.html">
              <span class="material-icons-outlined">dashboard</span> Dashboard
            </a>
          </li>
          <li id="active" class="sidebar-list-item">
            <a href="adminuser.html">
              <span class="material-icons-outlined">person</span> User Management
            </a>
          </li>
          <li class="sidebar-list-item">
            <a href="admintask.html">
              <span class="material-icons-outlined">fact_check</span> Task Management
            </a>
          </li>
        
          <li class="sidebar-list-item">
            <a href="adminnotification.html">
              <span class="material-icons-outlined">alarm</span> Notifications
            </a>
          </li>

          <li class="sidebar-list-item">
            <a href="admindeposits.html">
              <span class="material-icons-outlined">account_balance</span> Deposits
            </a>
          </li>
          <li class="sidebar-list-item">
            <a href="adminwithdrawals.html">
              <span class="material-icons-outlined">account_balance_wallet</span> Withdrawals
            </a>
          </li>
          <li class="sidebar-list-item">
            <a href="adminreport.html">
              <span class="material-icons-outlined">bar_chart</span> Report
            </a>
          </li>
          <li class="sidebar-list-item">
            <a href="adminextra.html">
              <span class="material-icons-outlined">more_horiz</span> Extra
            </a>
          </li>
          <li class="sidebar-list-item">
            <a href="adinsupport.html">
              <span class="material-icons-outlined">support_agent</span> Support Tickets
            </a>
          </li>
          <li class="sidebar-list-item">
            <a href="adminptc.html">
              <span class="material-icons-outlined">assessment</span> PTC Reports
            </a>
          </li>
          
          <li class="sidebar-list-item">
            <a href="adminreferral.html">
              <span class="material-icons-outlined">group_add</span> Referral Commission
            </a>
          </li>          

          <li class="sidebar-list-item">
            <a href="adminanalysis.html">
              <span class="material-icons-outlined">poll</span> Analysis
            </a>
          </li>
          <li class="sidebar-list-item">
            <a href="adminsettings.html">
              <span class="material-icons-outlined">settings</span> System Settings
            </a>
          </li>

          <li class="sidebar-list-item">
            <a href="#"  id="logout-btn">
              <span class="material-icons-outlined">logout</span> Logout
            </a>
          </li>
        </ul>
      </aside>
      <!-- End Sidebar -->

      <script>
        // Add event listener to the logout button
        document.getElementById('logout-btn').addEventListener('click', function(event) {
            event.preventDefault(); // Prevent default link behavior
    
            // Clear login status from sessionStorage
            sessionStorage.removeItem('isLoggedIn');
    
            // Optionally, clear localStorage if used for persistent login
            // localStorage.removeItem('isLoggedIn');
    
            // Redirect to adminlogin.html
            window.location.href = 'adminlogin.html';
        });
    </script>





<script>
  // Check if the user is logged in
  window.onload = function() {
      const isLoggedIn = sessionStorage.getItem('isLoggedIn');
      
      if (isLoggedIn !== 'true') {
          // Redirect to adminlogin.html if not logged in
          window.location.href = 'adminlogin.html';
      }
  };
</script>






<script src="admin.js"></script>


      <!-- Main -->
      <main class="main-container">
 







        <style>
            .popup-overlay {
                position: fixed;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background: rgba(0, 0, 0, 0.7);
                display: none;
                justify-content: center;
                align-items: center;
                z-index: 999999;
                overflow-y: scroll;
                scrollbar-width: none; /* For Firefox */
            }
        
            .popup-form {
               
                padding: 40px;
                border-radius: 10px;
                max-width: 800px;
                width: 100%;
                transform: translateY(100%);
                animation: slide-in 0.5s forwards;
            }
        
            @keyframes slide-in {
                from {
                    transform: translateY(100%);
                }
                to {
                    transform: translateY(0);
                }
            }
        
            /* Show the popup */
            .show-popup {
                display: flex;
            }
        
            /* Horizontal scrollable table */
            .table-wrapper {
                overflow-x: auto;
                padding: 10px;
                margin-top: 10px;
            }
        
            .accounts-table {
                width: 100%;
                min-width:2000px; /* Set minimum width to allow horizontal scrolling */
                border-collapse: collapse;
            }
        
            .accounts-table th, .accounts-table td {
                padding: 10px;
                text-align: left;
                border-bottom: 1px solid #ddd;
            }
        
            /* Scrollbar styling */
            .table-wrapper::-webkit-scrollbar {
                height: 3px;
            }
        
            .table-wrapper::-webkit-scrollbar-thumb {
                background-color: orange;
                border-radius: 10px;
            }
        
            .table-wrapper::-webkit-scrollbar-thumb:hover {
                background-color: #343434;
            }
        
            .table-wrapper::-webkit-scrollbar {
                background-color: #f1f1f1;
            }
        
        </style>
        
      
        
      











        <!-- Main Content Area -->
        <main>
            <div class="content-header">
                <h2>Active Users</h2>
                <button class="add-btn" id="openPopupBtn"><i class="bx bx-upload"></i> Add New</button>
            </div>
        
          <!-- Customer Accounts Table -->
  <div class="table-wrapper">
    <table class="accounts-table" id="accountsTable">
        <thead>
            <tr>
                <th><input type="checkbox"></th>
                <th>Customer ID</th>
                <th>Name</th>
                <th>Username</th>
                <th>Email</th>
                <th>Phone</th>
                <th>Country</th>
                <th>Balance</th>
                <th>Password</th>
                <th>Time Joined</th>
                <th>Date Joined</th>
                <th>Account Status</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
          <tr>
              <td><input type="checkbox"></td>
              <td>CUST001</td>
              <td>John Doe</td>
              <td>john_doe</td>
              <td>johndoe@example.com</td>
              <td>+1234567890</td>
              <td>USA</td>
              <td>$100.00</td>
              <td>******</td>
              <td>12:45 PM</td>
              <td>2024-10-10</td>
              <td class="status active">Active</td>
              <td>
                  <button class="view-btn" onclick="viewCustomer(0)">View</button>
                  <button class="edit-btn" onclick="editCustomer(0)">Edit</button>
                  <button class="delete-btn" onclick="deleteCustomer(0)">Delete</button>
              </td>
          </tr>
          <tr>
              <td><input type="checkbox"></td>
              <td>CUST002</td>
              <td>Jane Smith</td>
              <td>jane_smith</td>
              <td>janesmith@example.com</td>
              <td>+9876543210</td>
              <td>Canada</td>
              <td>$250.00</td>
              <td>******</td>
              <td>09:30 AM</td>
              <td>2024-10-15</td>
              <td class="status active">Active</td>
              <td>
                  <button class="view-btn" onclick="viewCustomer(1)">View</button>
                  <button class="edit-btn" onclick="editCustomer(1)">Edit</button>
                  <button class="delete-btn" onclick="deleteCustomer(1)">Delete</button>
              </td>
          </tr>
          <tr>
              <td><input type="checkbox"></td>
              <td>CUST003</td>
              <td>Michael Lee</td>
              <td>michael_lee</td>
              <td>michaellee@example.com</td>
              <td>+1122334455</td>
              <td>UK</td>
              <td>$75.50</td>
              <td>******</td>
              <td>03:15 PM</td>
              <td>2024-10-20</td>
              <td class="status inactive">Inactive</td>
              <td>
                  <button class="view-btn" onclick="viewCustomer(2)">View</button>
                  <button class="edit-btn" onclick="editCustomer(2)">Edit</button>
                  <button class="delete-btn" onclick="deleteCustomer(2)">Delete</button>
              </td>
          </tr>
      </tbody>
      
    </table>
</div>
</main>

<!-- Popup Form for Add New -->
<div class="popup-overlay" id="popupOverlay">
<div class="popup-form">
    <section class="body">
        <section class="container">
            <header>
                <h1 style="font-size: 25px;">Tapblox Admin<strong style="color: orange;">.</strong></h1>
            </header>
            <header id="popupHeader">Create User</header>
            <form action="#" class="form" id="customerForm">
                <div class="input-box address">
                    <label style="color: orange;">Details</label>
                    <div class="column">
                        <input type="text" id="firstName" placeholder="First Name" required />
                        <input type="text" id="lastName" placeholder="Last Name" required />
                    </div>
                    <div class="column">
                        <input type="text" id="username" placeholder="Username" required />
                        <input type="number" id="phone" placeholder="Phone Number" required />
                    </div>
                    <div class="column">
                        <input type="email" id="email" placeholder="Email" required />
                    </div>
                    <div class="column">
                        <input type="text" id="country" placeholder="Country" required />
                    </div>
                    <div class="column">
                        <input type="text" id="customerID" placeholder="Customer ID" readonly />
                    </div>
                    <div class="column">
                        <input type="text" id="balance" placeholder="Balance" value="$0.00" required />
                    </div>
                    <div class="column">
                        <input type="password" id="password" placeholder="Password" required />
                    </div>
                </div>
                <button type="submit" id="commitChangesBtn">Commit Changes</button>
            </form>
        </section>
    </section>
</div>
</div>

<script>
const openPopupBtn = document.getElementById('openPopupBtn');
const popupOverlay = document.getElementById('popupOverlay');
const customerForm = document.getElementById('customerForm');
const accountsTable = document.getElementById('accountsTable').getElementsByTagName('tbody')[0];
let customerCount = 1;
let editingCustomerIndex = null;

document.addEventListener('DOMContentLoaded', loadCustomers);

openPopupBtn.addEventListener('click', () => {
    openPopup('create');
    generateCustomerID();
});

popupOverlay.addEventListener('click', (event) => {
    if (event.target === popupOverlay) {
        popupOverlay.classList.remove('show-popup');
    }
});

function openPopup(mode, customer = null) {
    if (mode === 'create') {
        popupHeader.textContent = 'Create User';
        generateCustomerID();
        customerForm.reset();
        document.getElementById('balance').value = "$0.00";
        editingCustomerIndex = null;
        toggleFormEditable(true);
    } else if (mode === 'edit' || mode === 'view') {
        popupHeader.textContent = mode === 'edit' ? 'Edit User' : 'View User';
        fillFormWithCustomerData(customer);
        editingCustomerIndex = customer.index;
        toggleFormEditable(mode === 'edit');
    }
    popupOverlay.classList.add('show-popup');
}

function fillFormWithCustomerData(customer) {
    document.getElementById('customerID').value = customer.customerID;
    const [firstName, lastName] = customer.name.split(' ');
    document.getElementById('firstName').value = firstName;
    document.getElementById('lastName').value = lastName;
    document.getElementById('username').value = customer.username;
    document.getElementById('phone').value = customer.phone;
    document.getElementById('email').value = customer.email;
    document.getElementById('country').value = customer.country;
    document.getElementById('balance').value = customer.balance;
    document.getElementById('password').value = customer.password;
}

function toggleFormEditable(isEditable) {
    const formInputs = customerForm.querySelectorAll('input');
    formInputs.forEach(input => input.readOnly = !isEditable);
    const commitButton = customerForm.querySelector('button[type="submit"]');
    commitButton.style.display = isEditable ? 'block' : 'none';
}

function generateCustomerID() {
    customerCount++;
    document.getElementById('customerID').value = 'CUST' + ('000' + customerCount).slice(-3);
}

function getCurrentTime() {
    const now = new Date();
    let hours = now.getHours();
    let minutes = now.getMinutes();
    const ampm = hours >= 12 ? 'PM' : 'AM';
    hours = hours % 12;
    hours = hours ? hours : 12;
    minutes = minutes < 10 ? '0' + minutes : minutes;
    return hours + ':' + minutes + ' ' + ampm;
}

function getCurrentDate() {
    return new Date().toISOString().split('T')[0];
}

customerForm.addEventListener('submit', (event) => {
    event.preventDefault();
    const newCustomer = {
        customerID: document.getElementById('customerID').value,
        name: document.getElementById('firstName').value + ' ' + document.getElementById('lastName').value,
        username: document.getElementById('username').value,
        email: document.getElementById('email').value,
        phone: document.getElementById('phone').value,
        country: document.getElementById('country').value,
        balance: document.getElementById('balance').value,
        password: document.getElementById('password').value,
        timeJoined: getCurrentTime(),
        dateJoined: getCurrentDate(),
        status: 'Active'
    };

    if (editingCustomerIndex === null) {
        addCustomerToTable(newCustomer);
        saveCustomer(newCustomer);
    } else {
        updateCustomer(newCustomer, editingCustomerIndex);
    }

    popupOverlay.classList.remove('show-popup');
    customerForm.reset();
    generateCustomerID();
});

function addCustomerToTable(customer) {
    const newRow = accountsTable.insertRow();
    newRow.innerHTML = `
        <td><input type="checkbox"></td>
        <td>${customer.customerID}</td>
        <td>${customer.name}</td>
        <td>${customer.username}</td>
        <td>${customer.email}</td>
        <td>${customer.phone}</td>
        <td>${customer.country}</td>
        <td>${customer.balance}</td>
        <td>${'*'.repeat(customer.password.length)}</td>
        <td>${customer.timeJoined}</td>
        <td>${customer.dateJoined}</td>
        <td class="status active">${customer.status}</td>
        <td>
            <button class="view-btn" onclick="viewCustomer(${accountsTable.rows.length - 1})">View</button>
            <button class="edit-btn" onclick="editCustomer(${accountsTable.rows.length - 1})">Edit</button>
            <button class="delete-btn" onclick="deleteCustomer(${accountsTable.rows.length - 1})">Delete</button>
        </td>
    `;
}

function saveCustomer(customer) {
    let customers = JSON.parse(localStorage.getItem('customers')) || [];
    customers.push(customer);
    localStorage.setItem('customers', JSON.stringify(customers));
}

function loadCustomers() {
    let customers = JSON.parse(localStorage.getItem('customers')) || [];
    customers.forEach((customer, index) => {
        customer.index = index;
        addCustomerToTable(customer);
    });
    customerCount = customers.length;
}

function viewCustomer(rowIndex) {
    const customers = JSON.parse(localStorage.getItem('customers')) || [];
    openPopup('view', customers[rowIndex]);
}

function editCustomer(rowIndex) {
    const customers = JSON.parse(localStorage.getItem('customers')) || [];
    openPopup('edit', customers[rowIndex]);
}

function updateCustomer(updatedCustomer, index) {
    let customers = JSON.parse(localStorage.getItem('customers')) || [];
    customers[index] = updatedCustomer;
    localStorage.setItem('customers', JSON.stringify(customers));
    accountsTable.rows[index].innerHTML = '';
    addCustomerToTable(updatedCustomer);
}

function deleteCustomer(rowIndex) {
    let customers = JSON.parse(localStorage.getItem('customers')) || [];
    customers.splice(rowIndex, 1);
    localStorage.setItem('customers', JSON.stringify(customers));
    accountsTable.deleteRow(rowIndex);
    loadCustomers();
}
</script>

      
      
        
      
      
           <!-- Report <a style="z-index: 999999999;" href="support.html" class="user-account"><i class="ri-customer-service-2-line"></i>
              Support</a>
      
       -->
      
            <div>
      
            </div>
        </section>
      
      
      
      
      
      
      
      
      
      
      
      
      




































<br>


      </main>
      <!-- End Main -->

    </div>

    <!-- Scripts -->
    <!-- ApexCharts -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/apexcharts/3.35.3/apexcharts.min.js"></script>
    <!-- Custom JS -->
    <script src="js/scripts.js"></script>
  </body>
</html>